#include "edge-impulse-sdk/classifier/ei_run_classifier.h"

#include <hardware/gpio.h>
#include <hardware/uart.h>
#include <pico/stdio_usb.h>
#include <stdio.h>

const uint LED_PIN = 25;

static const float features[] = {
    // copy raw features here (for example from the 'Live classification' page)
    // ON
    151.1019, -72.2658, 104.7075, -2.2949, -172.5388, -86.7164, 91.3838, -3.6403, -30.2999, 76.2787, 95.1033, 38.4583, 167.5856, 175.2333, 200.9316, 125.9019, 85.3615, -3.5637, 26.9520, 28.2401, -8.9647, 151.7282, 112.2437, -264.2757, -79.3880, -6.0111, 58.1078, 22.1848, -65.6235, 89.6066, 83.6062, 135.2341, 322.8238, 137.6226, 181.3400, -167.1659, -218.4345, 81.5786, -27.3271, 32.1513, 23.8180, -10.6371, -87.5175, 36.1232, 92.5424, -92.1535, 50.0492, 58.8950, 97.8660, 181.8386, 47.6218, 27.7889, -176.3454, 327.5859, -305.9044, -479.9090, -62.4047, -534.0492, 54.9352, -59.2112, 73.3301, -138.9757, 103.2421, -83.7854, -89.2264, -11.3580, -549.8168, 230.1073, 192.7756, 36.3664, 209.4840, 189.7942, -58.2705, -50.0275, 50.9310, -3.8957, -208.3130, 220.4959, -76.2668, 16.1961, -100.2482, -26.7603, 37.2350, -17.7732, 144.1582, 238.2044, 81.9224, 140.8102, 177.8742, 27.8180, -84.6543, 290.7252, 140.9748, -369.7092, 40.6545, 42.1463, -665.3486, -187.4078, -208.5506, 48.6516, 9.1020, 43.7270, -58.9812, 115.5479, -104.0730, 52.4101, 193.9685, 290.6020, 236.1631, 253.9653, -160.0546, -67.1295, 148.4940, -72.3038, 114.9004, -2.1278, 4.9485, -227.6127, -127.1589, 83.5736, -58.6454, -30.3844, 16.3843, -13.3445, 78.7973, 100.4853, 220.7269, -150.6902, -237.6763, 134.6761, -66.4268, -94.3237, -13.2432, 38.3476, -95.1549, -12.9258, -191.2806, -106.2134, 95.8370, 56.6609, 68.3197, 79.7838, 36.1379, -54.4963, 278.9941, -34.0642, -274.8074, 115.0565, -5.4144, 15.6248, -155.1913, -144.4568, -248.8741, -91.6191, -802.3830, 126.1691, 141.6966, 206.1495, 98.0320, 174.8315, 280.5361, 143.9990, 156.4539, 100.2896, 39.0825, 56.5914, 15.7040, -59.7164, 46.0953, -46.4376, -59.9713, -62.3908, -70.8047, -126.9979, 46.8682, 126.1268, -13.1885, 61.7339, 145.4725, 119.4087, -595.2932, 15.7493, -242.3278, -71.0853, 238.7618, -248.2967, -78.5974, 26.4719, 67.1290, -10.6617, -152.7966, 75.4756, -193.3076, 100.5359, 194.1262, 208.7367, 208.4023, 283.9144, -364.4187, -181.7932, 407.4575, -57.9119, 93.6797, -21.7042, 20.3811, -163.2731, -215.7170, 75.5864, -214.8256, -155.8250, 49.7270, -158.3909, 295.0157, -131.6809, -318.3949, 305.9659, 47.3135, 67.7438, -104.5157, 0.5909, -227.7647, 71.0216, -23.8951, -339.0646, 40.4470, -110.0035, 87.2906, 27.8153, 3.3851, 180.8737, -43.1339, 132.1031, -209.0191, -427.3990, 195.8917, -142.3605, -219.0876, 130.0462, 64.9844, 51.4165, 13.2729, 69.6693, -7.8314, -195.5101, -650.1271, -12.5806, 137.3813, 242.2071, 159.1556, 170.7766, 131.0233, 84.2695, 49.9694, 102.2980, -25.7708, 239.7449, -28.6258, -41.8970, -324.2335, -40.3699, -80.0343, -85.7314, -108.6031, -44.0467, 89.0200, 85.8956, 357.7323, -303.8738, -160.3683, 168.4127, -105.0442, 269.2329, -452.0486, -274.5471, 128.0248, -90.1790, -167.5447, -124.4151, -93.9749, 35.9359, 155.9107, 25.3712, 139.4742, 95.2349, 179.9796, 197.4204, 84.4024, 42.5812, -86.9269, 71.7103, 114.7561, 118.6539, -56.1283, 127.1903, -393.8532, -590.9659, 196.0528, -99.9532, 43.5254, 29.1679, 155.9330, 170.7227, 28.8925, 192.5259, 128.1482, 138.1832, 182.8610, 65.6486, 115.6514, 45.8627, -180.4052, -37.3288, -6.7022, -17.3628, -190.5997, -252.9932, 183.1586, 94.9622, 8.4938, -289.2123, 122.7023, 66.0793, 126.4537, 212.1909, 79.7637, -19.7783, -32.8222, -18.8866, -283.3857, 5.8305, -98.1586, -83.0493, 68.6908, -63.6099, -6.1027, -50.5150, 19.9512, 56.9062, 137.2356, 229.0686, 85.6977, 127.2383, 224.7918, 72.1876, 3.6216, -66.2734, 77.5129, -82.6863, -137.3367, -0.6601, -0.7321, 21.1784, -49.3919, 55.2993, 98.5440, 1.9372, 101.0327, 185.9756, 57.9361, -145.1337, 181.3946, 133.1368, 111.2074, 55.3597, 93.0318, 127.5893, -41.9126, 15.2019, 64.8984, -6.1161, -33.3836, 71.8641, 38.3338, 45.4508, 236.0224, -360.3825, -370.6678, -11.5271, -49.4949, 162.9383, 41.1928, 203.7310, -62.2669, -33.2050, 3.0339, -82.9867, -212.1470, 67.6881, 23.8277, 117.6877, -26.4925, -80.8705, -158.8601, 60.8947, 53.5755, 115.7898, 73.4351, 82.9268, 247.0112, 51.4989, 46.2231, -31.4395, -48.8616, 2.5584, 65.3356, -175.5076, 88.9112, -202.0139, 43.2412, -66.1293, 65.1459, -33.4781, 163.0730, 54.2155, 68.0367, 137.4011, 46.8045, -90.1582, -39.1341, 191.0876, 77.2968, 13.2740, -43.3869, 121.5856, -27.4820, -120.6444, -107.1661, -2.0995, 136.4238, 208.1645, 157.9206, -384.0742, -16.5133, 154.6532, -24.9433, 121.6294, -82.2053, 60.2300, 224.8895, 136.4461, 43.7924, -73.5707, -97.9877, 60.4670, 1.3124, 34.3946, -12.2212, 34.5740, 39.8793, 19.0311, -142.0058, -191.6401, 380.0203, -342.7686, -215.0271, -122.2912, -271.5078, 98.1503, -192.8366, 71.1402, 2.4037, 125.7084, 221.2660, 229.1800, 131.4033, 160.8956, 65.4958, 73.9362, 5.6493, -32.5530, 145.0998, 164.8397, 128.5072, 2.3129, 55.0750, 101.2125, 35.3305, -175.3840, 38.5778, 193.8403, 290.5658, -39.6288, -25.1521, 200.4797, -64.5830, -154.8898, -10.7156, 15.8218, 137.9974, 42.1453, -191.7302, -16.1525, 45.7293, 34.8516, -192.4276, 125.6886, 7.5038, 97.1778, 140.1019, 208.4313, 56.2988, 105.9800, -254.9946, -360.3068, -143.0459, -70.6393, 12.5625, 14.9063, -250.7045, -27.0811, 59.9436, -35.1672, 24.9427, -5.3353, 20.1644, -96.0589, 56.9947, -453.5395, -46.9394, 163.2737, 29.8156, 112.5330, 28.6704, -41.2868, -60.2304, -8.5542, 31.0841, -19.0886, -22.3239, 193.1202, 202.9524, 193.8456, 98.9071, 164.1722, 138.7764, 30.3552, 105.8075, -56.3794, -157.4597, 8.9878, -23.1631, 139.2219, 160.0055, 101.1761, 98.5340, 86.4407, -90.3462, 59.6085, -513.1594, -555.5108, 346.5206, -603.9312, -1040.9689, -1375.1806, -136.2534, -230.5599, 289.3281, -140.5299, -105.8444, -222.2128, -488.8016, -263.9084, -30.0865, 434.2855, 54.3886, 253.6712, -65.5468, 84.9982, -295.6539, 454.8150, -13.4525, -84.1856, 125.1016, 266.8498, -166.5815, 142.9270, 37.8886, 45.6196, 534.4979, -200.7658, 256.2738, 68.2658, -173.5049, 104.4074, -102.9671, 15.5466, -50.2975, 28.8973, -305.9287, -165.9531, -14.9398, -151.1105, 452.6880, -210.9221, -189.0984, -109.0718, 9.6002, 151.0412, -33.9616, -6.6577, -63.5071, -12.6288, -24.9688, 32.1948, -287.8761, -186.0187, 378.4044, -257.4423, 73.3469, 72.0351, -165.1251, -178.1650, -45.2396, 95.0624, -43.5862, 44.6836, 130.0958, 152.3831, -125.1724, 88.4253, 31.9740, -40.2671, -26.7358, -171.3575, 14.6402, 123.1696, -96.3338, -3.2425, -143.9424, 19.4416, 22.7564, 24.9056, 56.6512, -38.2086, 135.1661, 13.1510, -97.3174, -52.0191, 27.3398, 58.9644, -5.2829, -70.1551, 8.4459, -60.4867, -107.7622, 121.1593, -46.0683, -102.1302, 133.1425, 113.2893, -6.6954, -11.4955, 99.3100, 64.1491, 28.7089, 38.3952, 127.9252, 16.2160, 51.4625, -15.5849, 51.1550, 0.5764, -27.2131, -69.9263, 91.1101, -116.8483, 13.5604, -25.5181, -22.7708, -5.5309, -41.2701, 9.2782, 16.7046, -81.0312, -94.2013, 10.6380, 10.3486, -4.5131, -15.1651, 2.5101, 9.3850, -50.6405, -41.4475, 2.1889, 6.5314, 18.7404, -39.7004, -46.6599, -24.6129, 5.5679, -48.1341, 47.9443, 29.7336, 2.4499, -5.2650, -11.4047, 33.3058, 10.5904, 27.7244, -20.5191, -17.1458, -32.8449, -23.8116, 43.1372, -54.6932, -21.5553, 42.7596, -37.2374, 53.4305, -10.6101, 13.6226, 45.4466, -2.0683, 14.4941, -0.4957, -16.1668, 22.7080, -60.4705, 35.8188, -27.3903, 37.5446, 28.2627, -17.9199, -13.8120, 13.1370, -6.4007, -20.4487, 1.2770, -5.1177, 66.4648, 17.3210, 0.5547, -7.8016, 37.2309, -46.9483, -14.6824, 9.9094, 5.8628, -0.2408, -16.8584, 3.9237, -28.0910, 0.3338, -28.9565, 3.8367, 10.3679, -10.9087, 37.4969, -10.4916, 32.7591, -3.7525, 19.1103, 11.1839, 12.3001, 15.8326, 8.1830, -26.6563, 25.1733, -2.3008, -27.8718, -7.4637, -18.4843, 36.6531, 9.2713, 37.9274, 36.2796, 19.2125, 44.4077, 22.7384, 20.9570, 22.3298, 54.0929, -16.3163, -28.0979, 13.0293, -10.3861, -12.7377, -4.6567, -11.5999, 8.2168, 17.1471, 0.6730, 11.2834, 0.8347, 25.2643, 32.2632, -17.0734, 4.2147, 2.9193, -4.7062, 28.0186, 1.6127, -5.7735, -29.7694, -11.4187, -27.6844, -49.1517, -23.4784, 24.5695, -27.9882, -37.7156, -13.7681, -16.8131, -14.9161, -1.2222, 0.3419, 30.1433, 34.5753, -13.7796, 16.9282, -37.5600, 9.2860, 33.3184, -5.2456, 34.2114, 24.4630, 24.9900, 15.9968, 27.0231, 7.1985, 22.2138, 27.0609, 13.8881, 29.6953, -15.7812, 9.7407, 27.1866, 39.1083, 28.9213, 34.9793, 12.7708, 47.2319, 18.9596, -0.6671, 5.8905, 3.4721, -13.2067, 1.6761, 31.6414, -8.0538, -17.7501, -19.6960, -20.8821, -16.7226, -7.5257, -1.4820, 23.8039, 17.9898, -13.7399, 6.3663, 20.8134, 13.2880, 13.4900, -0.1588, -10.9985, -18.8418, -23.4884, -7.0652, -13.0921, -19.4066, -7.0989, -19.0657, -20.1107, -16.5291, -5.5336, 32.9281, 5.3604, 32.9461, 48.1990, 17.8344, 14.5194, 5.3353, 45.7672, 41.9554, 37.5925, 20.9142, 8.7090, 14.1734, 23.4506, -8.5262, 2.7275, 18.0754, -19.5125, -6.9569, 15.9973, 5.9614, -10.1135, -4.2461, 67.0494, 50.3995, 48.3420, 7.6322, 35.5992, 7.8884, -11.3879, 19.0051, -76.3790, -1.7655, 0.9144, -12.8714, -6.0041, -20.6465, -17.3999, 12.2316, -89.4333, -40.1167, -1.6253, -2.3970, 11.4440, 1.5287, 14.5257, -13.3095, -9.2703, -9.8251, -14.1223, -9.6747, -2.7047, -11.8954, -15.2850, 8.4734, -53.5608, -114.8217, -40.3230, 5.7573, -31.1538, -10.2079, 18.6519, 32.6886, 65.0184, 56.3187, 36.8572, 51.4483, 43.2276, 14.5728, 21.1316, 17.1735, -24.0644, -2.8372, 9.2501, 3.0720, -14.8046, 22.3648, 34.5457, 7.3467, -11.1746, 5.0580, 5.5575, -12.4716, 52.4993, 38.7630, 51.0147, 39.4066, 40.1188, -0.2664, -7.6580, -53.0573, -113.0159, 15.6324, -23.9678, 0.8049, 30.7711, 3.0516, -5.6407, -15.9523, 12.2919, 18.2365, 57.8669, 12.7817, 25.9055, 27.2542, 27.5309, 7.0909, -6.6974, 27.7315, -22.3701, -59.9472, -12.9608, -15.4464, -7.6278, -18.6589, -18.7245, -21.1888, -16.0939, 13.9917, 14.2714, 49.6438, 43.3820, 75.2851, 47.6835, 48.6892, 18.0176, -38.8097, -14.2600, -13.2624, -49.2242, -67.9563, -23.1924, -15.2427, -26.8850, -4.9551, 1.0246, 23.2575, 13.3710, 11.5737, 36.8783, 44.5855, -0.2754, 31.9311, 38.9122, 20.7525, 17.4440, -9.2530, -24.0183, -19.6751, -16.1606, -17.2597, -13.8843, -5.4994, 7.9194, -28.4456, -22.3516, 19.6770, -10.3076, -0.5087, 27.8804, 6.6239, 35.1525, 52.4576, -23.2900, -126.2629, -53.1525, 17.6197, -31.4822, -24.9130, -29.0207, -16.0953, -8.6508, 10.0372, 2.2651, 34.4398, 63.0324, 19.2176, 6.7038, 18.6374, 37.3368, 15.7832, -6.5329, 30.9634, 36.6887, -19.5995, 18.2878, 6.4563, -11.0080, 23.0038, 17.5855, 1.2355, 0.7502, -4.9217, 1.3850, -35.5908, 21.8979, 42.4892, 1.8309, -29.6959, -95.1843, 14.1502, 35.1329, 27.0889, 28.4338, 15.9438, 30.0995, -10.8095, -19.6229, 9.1529, -7.7753, -16.0616, -8.4699, -1.6051, -24.5169, 0.5082, 47.2876, -1.4847, 89.2079, -110.0341, 169.9992, -398.4523, -784.9059, -1181.4514, -1762.4912, 287.4551, 531.9494, 45.0818, 51.8667, -352.2686, 301.8176, 228.2711, -0.8395, -3.6678, -127.3655, 238.2703, 296.9316, 122.9203, 400.0351, -152.9064, -5.2562, 311.3063, -123.4622, 47.3950, 19.8886, 427.6285, 21.5947, -139.8732, -252.3067, 141.4906, 50.4224, -536.0890, 360.2024, 75.1640, 142.6514, -261.9803, -26.0352, 118.1089, -193.0020, 0.9402, -16.2842, 107.5397, -10.0528, 292.4067, 271.6193, 0.3802, 140.4712, -226.7913, 180.8508, -38.8252, -12.7199, -12.1050, -37.8666, -116.1132, 328.5681, 132.6556, 164.2441, 126.5684, 10.3537, -71.7782, 285.9683, -165.1907, 222.9697, 26.1287, 267.3181, -67.0956, -19.0840, -203.7724, 116.0236, 72.7835, -40.2256, 60.9351, -214.1428, -58.3818, 47.4640, 3.5083, 112.3317, -24.8248, 201.8832, -72.5015, 186.8301, -142.8814, -109.6115, 203.4526, -94.3827, -21.0260, -59.8759, 67.0618, 37.9490, -81.8628, 8.5505, -63.3064, 81.4868, -3.3710, 78.1627, -9.6022, -73.8838, -27.6646, 61.6237, -5.7349, -53.7341, 121.0716, -74.3382, -108.8312, 20.2950, 27.2105, -29.9580, -0.3041, 13.3316, 57.1014, 98.0160, -14.8795, -62.6135, 151.2179, -29.4030, 41.4758, 82.2394, -117.4793, 40.5521, -45.7833, 79.7305, 10.8992, 1.2877, 14.5775, 18.7203, -3.9277, -41.1154, -23.9435, 77.5275, -89.5825, -2.9424, -6.4119, 98.6740, -19.2472, 37.6946, -11.6759, 44.2041, 12.0155, -118.0155, 29.6553, -16.7933, -16.7526, -35.9793, 33.8729, -46.3676, 71.5024, -32.3244, -2.2559, -45.1254, 1.6116, -60.4480, 7.7566, -18.0467, 13.7820, 3.8792, 34.5162, -24.0105, 32.5443, -136.8857, 1.8963, 41.1978, -30.0167, 7.2172, 0.1001, 48.3065, -37.6616, 38.4713, 19.8245, 6.0938, 30.9600, 17.3447, 37.7784, 17.9684, -37.3797, -25.5159, -9.4814, -18.2871, -15.6201, -3.9773, 0.6109, 6.6028, 32.5096, -27.4224, 35.4609, 11.3509, 11.4013, 48.6741, -2.7563, 8.4666, 16.8392, 7.7508, 14.6733, 12.7000, -19.0662, 5.1880, -20.2180, 5.5890, -32.6943, 9.6663, 31.8615, -28.0247, -7.8666, -5.0282, -1.7860, 7.0801, 14.7644, -8.7210, 33.9395, 35.0682, -18.3254, 23.7327, 24.8889, -21.9707, -9.0674, 16.2371, -15.4486, -15.8304, 1.0109, 29.4420, 7.4641, 3.5111, -8.3650, 39.4791, 12.7555, 55.6708, 27.9249, -22.0872, 9.3027, 24.7127, 28.5151, 1.9400, -12.4462, -2.5990, -0.8849, 0.1535, -23.8698, -77.1064, -26.8065, 30.7468, 2.0863, -2.0829, -8.5940, 18.6853, 3.6066, -13.0711, -1.4272, -14.3085, -14.0918, -23.2752, -16.1705, -14.2346, 10.7385, 0.5165, 1.1881, 14.5263, 1.3886, 2.0181, 23.9339, 5.5124, 6.1534, 26.8303, 9.4050, 20.6961, 43.3205, 8.3931, 5.3795, 43.0819, 15.5733, 4.0992, 30.7353, 28.3719, -9.6481, -3.4585, 12.3523, -10.0714, -12.8256, -5.7829, 21.5404, 32.6421, 29.5375, 25.5935, 2.6684, 7.6883, 34.5639, 15.7790, -2.1212, 11.8135, 12.5358, 17.6596, 4.5439, 1.6036, -12.9089, -16.5147, -43.4653, -10.6611, -10.1514, -15.6022, -3.5374, 13.1622, -9.5684, 3.8189, 25.6290, -6.6796, 12.9689, -3.3862, -24.9114, 2.4276, 17.0305, -2.0213, 12.9251, -9.9134, -9.3059, 2.7873, -15.2739, -16.1328, -16.3588, -9.3452, -15.3254, 4.0224, 43.9879, 22.9620, 29.7124, 58.7059, 49.0674, 3.3832, 37.7313, 9.2600, 12.8027, -9.8676, -1.1392, 2.4974, 6.5123, -9.2271, 5.8854, -16.8306, -15.2773, -72.3024, -33.2769, 13.9432, 7.4647, -18.9078, 2.5225, 45.8110, 31.2883, 12.1831, 13.3057, 31.0354, -5.7674, -10.2532, -14.9027, 3.2191, -16.0987, -17.6657, 0.3609, -19.6987, -6.2335, -17.4059, -9.7914, -9.7725, 5.8903, 20.9724, 30.8371, 62.2738, 14.2345, 16.6432, -1.6793, 21.9529, -21.0455, -75.3892, 28.0493, -25.7766, 7.2510, -9.0172, -16.6997, -15.2034, -3.3275, -12.1156, 7.3775, 5.3540, 32.0987, 22.7408, 30.1922, 38.1071, 41.0759, -4.2178, 22.2010, -18.4251, -19.6510, -14.9947, -7.0148, -14.8893, -13.0907, -16.1641, 11.2496, -8.4236, -21.9762, 5.7455, -102.2602, 2.5641, -69.4792, 13.9100, 20.9500, 8.5688, 32.2167, 16.3993, -4.4073, -16.5457, -17.7563, -17.7835, -28.8557, -5.2613, 32.8857, 43.3858, -60.1027, -15.6412, 12.0527, 14.9749, 13.3042, 26.5994, 35.9524, 50.9089, 66.4796, 39.0748, 17.8895, -1.5099, 8.2298, -12.7655, 34.4371, -75.7225, -68.0992, 40.0703, -15.0824, 7.0693, -10.6827, 27.7863, 0.7172, 2.1399, 12.7875, -5.9830, 45.1920, 34.7575, 41.6792, 23.6671, 52.5541, 35.6975, -7.3980, -5.7115, 6.0588, -29.0904, -15.6648, 12.3511, -3.9438, 0.8300, -1.4306, 29.1204, 26.7858, 15.3907, 3.1275, -13.0538, -25.8468, -0.4936, -12.7014, 32.0960, 3.5013, 23.6217, 21.6251, -4.6478, -61.0233, -11.8055, -25.5778, -27.9454, -14.1900, 33.3597, 37.4955, 21.8962, 2.2063, 10.9518, -10.0489, 0.6276, 33.7451, 5.3895, -2.4184, 4.3312, 1.4063, -1.3084, 11.0797, 20.2153, 0.4555, -4.2769, -52.2839, -42.0865, -1.8062, -117.0247, -80.6583, 31.7281, -5.1925, -0.5349, 29.7001, 47.2243, 1.7024, 6.1807, 1.7545, -2.9569, 0.2572, 8.2165, 0.2171, -22.5339, -2.0714, -20.0656, -22.6956, -11.4445, -8.0981, 36.0713, -17.3461, 24.6320, 34.1503, 24.3252, -42.8388, -30.8268, -352.8858, -639.8324, 541.7153, 305.1008, -361.8879, -313.0460, 59.9097, 460.5467, -262.5605, 124.7787, -76.7932, -36.2920, -28.7606, 65.6257, 9.2431, -174.3386, 278.5448, -121.1618, -53.9803, -59.9390, -55.7767, -27.0117, 312.2305, 37.3277, -63.7077, -41.8141, -110.4111, -113.7699, 53.1979, 91.4374, 108.5635, 194.1213, -47.5250, 274.8278, -22.7158, -29.4609, 119.5568, 18.2511, 42.6081, -84.9305, 66.0055, 4.8095, -196.4257, 75.2376, -7.4437, 34.1995, -145.6918, -87.5395, 21.0983, -55.7244, 38.0310, 30.5526, -195.5817, 5.5486, 20.7225, -44.9773, -94.7801, -138.2247, -215.2316, 91.0229, 6.0709, -55.6382, -22.2945, -113.2159, 63.4614, -96.9868, 78.9567, -88.0572, -84.4327, 4.6119, 51.9178, 60.2274, -9.6159, 130.0751, 52.0660, -42.4675, -15.7088, 85.7202, -3.5977, -9.7541, 79.1795, -49.0191, -34.1356, 46.1064, 19.9230, 80.3430, 77.0490, 60.1146, -38.7999, 68.4470, 31.6459, -14.5250, -55.4799, 9.9217, -18.0232, -14.7835, 23.9897, -17.0204, -14.5616, -72.8209, 45.3502, 52.2183, -34.0610, 9.6795, 124.2106, -5.4405, 19.8418, -51.2787, 4.8731, -19.7331, -18.7247, 21.5997, -0.5996, -15.4785, -7.5102, -54.0513, 8.1951, -2.8336, -47.1534, 27.8919, -35.1644, 3.3927, 4.2369, -18.2027, 61.7565, 4.0176, -23.0540, -11.6620, -36.0984, -6.2568, -12.1236, -18.8057, -0.8474, 11.1669, -3.3209, -13.6106, -21.6791, 13.7669, 32.6137, 6.3328, 32.8913, 50.2683, -2.5161, 24.1649, 8.3268, -17.7128, -11.3495, 5.7099, 4.0669, -34.9872, -22.7713, -10.1490, 18.3326, 1.4835, -14.1119, -37.5410, 2.7816, 22.0327, 9.5024, 43.0166, 38.9691, 42.5707, 11.6768, -3.2585, 18.4462, 10.1467, -1.4711, 0.9820, -18.4698, -6.6814, -20.8196, -9.4191, 0.0798, -4.3949, 1.8280, -18.0508, 12.5818, 7.6939, -4.8326, 46.9425, 34.7990, 71.6300, 40.3277, 21.2257, -16.9861, -7.3980, -43.8222, -19.4316, -21.8519, -3.6403, -2.7598, -4.5186, -27.1481, -11.4870, -1.9959, 27.1063, 10.9812, 38.0257, 44.1157, 34.4941, 21.6344, 36.3316, 20.9019, 28.3707, -4.1554, 9.1884, -25.1897, -24.3299, -28.4000, -33.0396, -34.4577, -21.4900, 3.0379, -3.3793, -4.0914, 24.8442, 34.6805, 50.1193, 38.2400, 12.8092, 27.6716, 23.4007, -7.5943, -24.5845, -39.1197, -75.5896, -29.5524, -74.0132, -30.2929, -52.8308, -23.6055, 50.1135, 10.4462, 34.0445, 33.3245, 58.3908, 20.7556, -2.3134, 54.5703, 3.8099, -3.8758, 4.6324, -7.5046, -37.2846, -80.1782, -24.2579, -21.0416, -8.8427, -19.0016, 14.8032, 26.6412, 5.8442, 21.0437, 45.5134, 47.1984, -5.4624, 71.6441, 30.7449, 2.5862, 6.4310, -21.5439, -15.7136, -12.4356, 5.9045, -18.9118, -14.1814, -17.1613, -15.2160, -15.6099, -14.4700, 22.0025, 32.8787, 22.4925, 27.5435, -16.4645, 31.8699, 44.1971, 18.4318, -16.3489, -15.0881, 6.1810, -15.8129, -15.4318, -43.2334, -34.0578, -30.2431, -17.1569, -15.8359, -8.2428, -4.7354, 24.8820, 50.4478, 29.7546, 45.8471, 15.4484, 58.0977, 23.2608, 18.0135, 8.9568, -7.8840, -11.5432, -8.3636, -10.0211, -26.2899, -1.6111, -75.7182, -47.3454, 12.9119, -25.6792, 42.5056, -19.7826, 23.6944, 73.3284, 56.2115, 41.3387, 32.4496, 1.9647, -6.0439, -5.8842, -9.5380, -54.2939, -65.1219, -5.4482, -18.5808, 4.3531, 25.7221, 57.1488, 45.6208, 34.1957, 22.6663, 27.2173, 43.0716, 1.5842, -40.3244, 46.9796, -12.0767, -62.0164, 14.4555, -19.1632, -17.0168, -20.3697, -23.2644, -11.0896, -33.0885, -61.6977, 46.4535, 12.1206, 24.2434, 3.4551, 1.8805, 26.9947, 18.1395, 9.9449, 2.8646, -12.3974, -113.2395, -11.7499, -16.4023, 7.1653, -11.8662, -2.4446, -98.9236, -0.2936, -1.4295, -64.3491, 22.8985, -7.9689, 21.0124, 45.6654, -49.2216, 3.7330, 28.0412, -16.6636, 4.3754, -12.8428, -16.5458, -19.2749, -8.7390, -13.9300, -3.6428, 18.1206, 12.8445, 26.5986, 20.3511, 6.8867, -1.3567, 40.1223, 46.1940, -31.2556, -12.1570, 41.9753, -79.0964, -51.2842, 1.9888, -34.9396, -21.2225, -49.2461, -40.3587, -18.4824, -6.2971, 21.4180, 30.2097, 18.2952, 14.8571, 35.2775, 22.6691, 37.1272, 36.4186, 40.0487, 62.2830, -10.6913, 4.1842, -7.6371, -13.9330, -13.6944, 0.9214, -69.7659, -110.9553, 39.0273, -7.7264, 10.2619, 33.4592, 39.1739, 5.1513, 22.5671, 21.6539, 55.2784, 50.7403, 59.0801, 7.9334, -12.6285, 26.6225, 0.2472, -15.7936, -11.2201, -15.1774, -56.9038, -142.5244, 5.3117, 1.2292, 37.5324, 51.7726, -60.9856, 54.3042, 46.4513, 31.6578, 43.7121, 16.2405, 36.6680, -0.2273, -2.4802, -11.2904, -33.7323, -18.0188, -9.0169, -19.1828, -20.9652, 6.1233, -18.3654, 17.7303, 58.6926, 41.1559, 74.2560, 41.2637, 27.4705, 11.2742, 8.0258, -96.0369, -25.2069, 12.0529, -23.5084, -20.0813, -29.4532, -4.0762, -42.0808, -15.7952, 9.5082, -36.1418, -23.0307, 19.1429, 29.5594, 25.8279, 52.9336, 59.2993, 63.6621, 28.1046, -28.6942, -6.3793, -34.6122, -23.0688, -11.9728, -31.1509, -10.0380, -18.4414, 1.8821, -12.7577, 28.7670, 45.4809, 18.3462, 41.7413, 11.3395, 71.7593, 72.5295, 45.4744, 41.1882, 24.8183, -38.7725, -87.9367, 13.9910, -43.8122, -0.4759, -50.5505, -117.3722, 13.3499, -23.6418, 14.0131, 19.6784, -23.6445, 36.0218, 35.4233, 18.8586, -15.5992, 29.8423, 5.3065, -13.0016, 1.7912, -18.2504, -72.5483, 27.8093, 17.3591, 13.6294, -12.9853, -20.9628, -16.7613, -11.5540, -12.9770, 44.8381, 63.4897, 69.4371, -81.7199, 12.0014, 40.0644, -7.2063, 5.6288, -13.5362, -15.3705, -48.6040, -2.1206, -0.3069, -2.6801, -72.1942, -46.0057, -7.2420, -14.1318, 12.0859, 25.6723, 61.8848, 68.8108, 54.9664, 45.1285, -5.4089, 5.1824, 24.4216, 28.8394, 32.6663, -9.6711, -1.0277, 2.6444, -13.8775, -15.5402, -18.4557, -21.9648, -12.3485, -17.4944, 29.9737, 43.5282, 58.2921, 82.3333, 59.4957, 66.9986, 72.5470, 71.9326, 18.2475, -20.3634, -197.2549, -90.9057, -55.4390, -147.2669, 70.9577, 18.1373, 8.6052, -14.7871, -58.5901, -7.9786, 6.4523, 13.2274, 73.4653, 42.5236, 63.7536, 39.5999, 72.1646, -20.2564, 26.1712, -22.0125, -104.6364, 13.0578, -16.0965, -22.6292, -7.8915, -43.5884, -16.0139, -18.6056, 52.4226, 8.2731, -9.9312, 36.5292, 19.0287, 29.2234, 21.8939, 36.1131, 32.8826, 39.7677, -60.6806, -35.2324, -3.8670, -30.8544, -1.6470, -70.4243, -0.9699, -5.0638, 1.5593, 20.9222, 28.9212, 13.0763, 56.3481, 10.3871, 0.8543, 72.3381, 28.4570, 21.1199, -2.1283, -3.2391, -9.0645, -21.9151, -39.5980, -17.3034, 10.0390, -4.6242, -2.0532, 1.8610, 12.1024, 1.1675, -25.5379, -8.1760, 24.8700, -18.3416, 3.3265, 18.8078, 25.4372, 53.3507, -14.2914, -4.5422, -26.9014, -12.7754, 41.0344, 6.5890, 7.3117, 3.8378, 42.7321, 42.3414, 30.7764, -19.3653, 3.9667, 12.2562, 10.4184, 30.0208, 7.6142, -3.6081, 28.6614, 80.3813, 30.5400, 80.0371, 33.7947, -11.0799, -4.4351, -27.3621, 7.1766, -16.1749, -2.0203, 4.8386, 0.1515, -27.5206, 22.3944, -8.0948, 26.6523, -8.0729, 18.1736, -139.6342, 20.9431, 24.8365, 13.8847, 66.1335, 26.9653, -66.0433, 11.1976, 11.2284, -20.8881, -13.0315, -5.8326, -4.6750, -34.0624, 54.8543, 25.1859, 26.7751, 80.3018, 56.0896, 118.3173, -56.0984, 3.8665, 108.9201, -21.3551, 94.4457, -2.9023, 35.4376, -130.7723, -95.6329, 28.4159, -18.7828, 40.4695, 12.0921, -132.2325, -76.4552, 109.0647, 36.9245, 107.5863, 94.5209, 14.1323, 55.9807, 68.3822, -53.6120, -86.4895, -46.2206, 38.7177, 31.2179, 8.7884, 52.4573, 47.2901, -15.9864, 18.0586, 7.2171, 13.5825, -1.3707, 52.2085, -26.4059, -7.8768, 5.8753, -9.8691, 23.2275, 9.1186, -107.8828, 8.1747, -54.2647, -5.9208, -9.0719, -96.9361, 2.0207, 52.1650, 64.3611, 14.2275, 43.6276, 65.1311, 49.9761, 7.1606, -75.9155, 20.1392, 40.3836, 38.9933, 14.5931, 9.8020, -12.3082, -21.8332, -38.3975, -70.1191, 37.2236, 45.6069, -154.8970, 38.0664, 76.7197, 55.7511, 77.9796, 20.1081, -35.5972, 8.4506, -0.8617, -28.9320, -5.6218, -22.3104, 5.7766, 41.2713, 13.9478, 13.3443, 57.3849, 61.9774, 57.0615, 74.3232, 65.7230, 54.4564, 122.2190, 82.7383, -8.0469, 17.8062, -44.0231, 13.7717, -205.9110, -111.9249, -91.6118, -120.0791, 142.0633, -20.2337, 45.3136, -43.3772, 7.9981, -29.9561, -109.1315, 177.8547, -48.8863, -161.8243, 60.6017, -76.5723, 58.9456, -140.7429, -218.1948, 49.3549, -68.3840, -235.9730, -281.4874, -95.0701, 26.7344, 24.0192, 37.6664, 95.2312, 54.6988, 66.0956, 111.6068, 103.3137, 94.8862, -25.3290, -10.4683, -50.0047, -2.3620, -28.0968, 10.0964, -35.7528, -35.4554, 8.4098, 80.7408, 65.9258, 71.2131, -50.6694, 73.0712, 33.2253, -12.3233, 70.7959, -128.5509, 44.9374, 58.2989, -15.3218, 116.2774, 34.7256, 18.2284, -42.6312, -42.9184, -9.8146, -2.8903, 44.4846, -2.1409, 109.3786, 64.6508, 11.9328, 115.8169, 10.4017, 21.6848, 90.9841, 39.7099, 128.4715, 65.3095, -22.5634, 40.7240, 7.8597, 30.8920, 1.2039, 42.1289, -61.0798, -83.4280, 2.3699, 50.8837, 73.4748, 27.0255, 74.9544, 37.1752, 51.8110, 82.4757, 57.3093, 58.2215, 30.1618, -55.2561, 76.5845, 15.4197, -58.8462, -30.5160, 7.5365, -52.3125, -151.1641, 27.3883, 33.2260, -28.8009, -7.4038, 81.4556, 51.0604, 62.9317, 82.4281, 50.8237, 3.1928, -113.9346, 43.5316, -5.4379, 8.3825, 87.5906, 19.3910, -11.7821, -348.4384, -66.0441, -18.0006, 7.6035, -23.2770, -167.4841, 21.6079, 59.4316, 71.7628, 98.6431, 146.5851, 113.2659, 71.1424, 2.1760, 37.1780, 177.3863, 77.4742, -320.7877, -59.2360, 22.4155, -105.2538, -50.0997, -156.2797, -77.6346, 99.1158, 10.9881, -0.5161, 64.3303, 37.9852, 163.2618, 142.2862, 24.5763, 51.7669, 91.5082, 55.6837, 94.5533, 67.6601, 51.6161, -110.2097, -254.2614, -72.7493, -83.2384, 106.0185, -14.8170, -155.7536, 148.0618, -110.3949, -17.8631, 197.4452, 24.9039, 77.1652, -17.4655, -2.5970, 89.6564, -59.3244, -54.6412, 56.5227, -84.4191, -98.9408, 74.1190, -38.9802, -8.6134, 11.0206, 10.5211, 67.5716, 53.1301, 197.0004, 33.2340, 98.4119, 155.3751, 62.5585, 41.2298, -3.7434, 76.0475, -73.0292, -261.3727, 7.3389, 14.9305, -22.0669, 13.5990, -33.9763, -217.9949, 73.7656, -66.5849, 8.7506, 28.0738, 120.3424, 154.8473, 93.1086, -232.6511, 29.1504, -1.5401, -44.5276, -16.4683, -47.2701, 58.5555, 125.3007, 7.1883, -28.7088, 5.4186, -12.0621, 18.7967, 56.6504, 61.2069, 53.5994, 50.8289, 161.5325, -89.0289, -68.1252, 135.8112, -41.1916, -4.8376, 1.0630, -74.1850, -76.0966, 63.7277, 63.8352, -27.0895, -35.4413, 123.8350, 111.8170, 136.2346, 139.4054, -68.0466, -4.8212, 99.4871, 16.8181, 106.9312, 117.4272, -61.1888, -42.6765, -59.1163, -21.6428, 14.0479, -47.5336, 24.5915, 58.5583, -33.0229, 126.0787, 140.9436, 98.2633, 65.1480, -162.6269, -16.4708, 219.8369, 221.5126, 64.3633, 45.0175, 40.8719, 35.1166, 39.0094, -102.7033, -127.0430, -29.1723, 83.9751, 12.0310, 53.2549, 31.3774, -37.9706, 206.7469, 141.1286, 71.2741, 19.1605, -15.2316, -55.2813, -37.6531, 4.1721

};

int raw_feature_get_data(size_t offset, size_t length, float *out_ptr)
{
  memcpy(out_ptr, features + offset, length * sizeof(float));
  return 0;
}

int main()
{
  stdio_usb_init();

  gpio_init(LED_PIN);
  gpio_set_dir(LED_PIN, GPIO_OUT);

  ei_impulse_result_t result = {nullptr};

  while (true)
  {
    ei_printf("Edge Impulse standalone inferencing (Raspberry Pi Pico)\n");

    

    if (sizeof(features) / sizeof(float) != EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE)
    {
      ei_printf("The size of your 'features' array is not correct. Expected %d items, but had %u\n",
                EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE, sizeof(features) / sizeof(float));
      return 1;
    }

    while (1)
    {
      
\

      printf("size of features/floats: %d\n", sizeof(features) / sizeof(float));
      printf("EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE: %.3f\n", EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE);
      printf("EI_CLASSIFIER_RAW_SAMPLES_PER_FRAME: %.3f\n", EI_CLASSIFIER_RAW_SAMPLES_PER_FRAME);
      printf("size of features returned: %d\n", sizeof(features));
      printf("total_length: %d\n", sizeof(features) / sizeof(features[0]));
      

      // the features are stored into flash, and we don't want to load everything into RAM
      signal_t features_signal;
      features_signal.total_length = sizeof(features) / sizeof(features[0]);
      features_signal.get_data = &raw_feature_get_data;

      // invoke the impulse
      EI_IMPULSE_ERROR res = run_classifier(&features_signal, &result, false);

      ei_printf("run_classifier returned: %d\n", res);

      //size of features/floats: 2700
      //EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE: 0.000
      //EI_CLASSIFIER_RAW_SAMPLES_PER_FRAME: 0.000
      //size of features returned: 10800
      //total_length: 2700
      //run_classifier returned: 0



      if (res != 0)
        return 1;

      ei_printf("Predictions (DSP: %d ms., Classification: %d ms., Anomaly: %d ms.): \n",
                result.timing.dsp, result.timing.classification, result.timing.anomaly);

      // print the predictions
      ei_printf("[");
      for (size_t ix = 0; ix < EI_CLASSIFIER_LABEL_COUNT; ix++)
      {
        ei_printf("%.5f", result.classification[ix].value);
#if EI_CLASSIFIER_HAS_ANOMALY == 1
        ei_printf(", ");
#else
        if (ix != EI_CLASSIFIER_LABEL_COUNT - 1)
        {
          ei_printf(", ");
        }
#endif
      }
#if EI_CLASSIFIER_HAS_ANOMALY == 1
      printf("%.3f", result.anomaly);
#endif
      printf("]\n");

      ei_sleep(2000);
    }
  }
}
